group 'dk.sdu.cloud'
version '0.7.0-SNAPSHOT'

apply from: "${project.projectDir}/../shared-gradle/sdu-cloud.gradle"

repositories {
    maven { url "https://dl.bintray.com/tus/maven" }
}

dependencies {
    compile group: 'com.squareup.okhttp3', name: 'okhttp', version: '3.11.0'
    compile group: 'org.kamranzafar', name: 'jtar', version: '2.3'
    compile 'io.tus.java.client:tus-java-client:0.3.1'

    compile "dk.sdu.cloud:service-common:0.15.0-SNAPSHOT"
    compile "dk.sdu.cloud:auth-api:1.2.1-SNAPSHOT"
    compile "dk.sdu.cloud:notification-api:0.3.0-SNAPSHOT"
}

task debugMe() {
    logger.info("Looking for all source sets")
    logger.info("${sourceSets["generated"].allSource.asPath}")
    logger.info("${sourceSets["generated"].compileClasspath.asPath}")
    logger.info("${sourceSets["generated"].runtimeClasspath.asPath}")
    logger.info("${sourceSets["generated"].output.asPath}")
    logger.info("${sourceSets["main"].compileClasspath.asPath}")
    logger.info("${sourceSets}")
}

apply plugin: 'application'
mainClassName = "dk.sdu.cloud.storage.MainKt"

sduCloud.createTasksForApiJar(
        "files",
        []
)

sduCloud.createTasksForApiJar(
        "upload",
        [
                "dk.sdu.cloud:files-api:${project.version}",
                "com.squareup.okhttp3:okhttp:3.11.0"
        ]
)

sduCloud.createTasksForApiJar(
        "tus",
        [
                "io.tus.java.client:tus-java-client:0.3.1",
        ]
)

sduCloud.createTasksForApiJar(
        "shares",
        [
                "dk.sdu.cloud:files-api:${project.version}",
        ]
)
