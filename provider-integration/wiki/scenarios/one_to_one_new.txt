# https://sequencediagram.org/

autoactivation
actor "UCloud User\nAlice#1234" as User

participantgroup #lightgreen ** UCloud\nNetwork**
participant "UCloud" as UCloud
database "UCloud DB" as UCloudDB
end

participantgroup #lightblue **Provider\nNetwork**
participantgroup #lightyellow **New components**
participant "Integration Module" as Provider
database "Integration DB" as UserDB
end
participantgroup #pink **Existing components**
participant "                                 HPC                                 " as HPC
end
end

User->UCloud: Connect with provider
UCloud->Provider: Alice#1234 wishes to connect
Provider->HPC: Initialize user\nAlice#1234
note over HPC: This reuses existing\ninitialization scripts
HPC->HPC: Create local user
HPC-->HPC: UID 1100

HPC->HPC: Additional config\ne.g. Slurm account
HPC-->HPC: OK
HPC-->Provider: OK: UID 1100, ...
Provider->UserDB: Alice#1234 is \nUID 1100
UserDB-->Provider: OK
Provider-->UCloud: Mapping for Alice#1234 complete
UCloud->UCloudDB: Save mapping
UCloudDB-->UCloud: OK
UCloud-->User: Success

== Alice#1234 can now consume resources from the provider ==
