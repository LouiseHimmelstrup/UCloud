package = dk.sdu.cloud
headers = ucloud.h
staticLibraries = libucloud.a
libraryPaths = vendor/libucloud/linux

---

int forkAndReplace(char **process, char **envs, int new_stdin, int new_stdout, int new_stderr) {
    int result = fork();
    if (result != 0) return result;
    if (new_stdin != 0) {
        close(0);
        dup2(new_stdin, 0);
        close(new_stdin);
    }

    if (new_stdout != 0) {
        close(1);
        dup2(new_stdout, 1);
        close(new_stdout);
    }

    if (new_stderr != 0) {
        close(2);
        dup2(new_stderr, 2);
        close(new_stderr);
    }

    execve(process[0], process, envs);
    return -1;
}

